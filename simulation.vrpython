{"mode":"Text","hardwareTarget":"brain","textContent":"#region VEXcode Generated Robot Configuration\nimport math\nimport random\nfrom vexcode_vrc import *\nfrom vexcode_vrc.events import get_Task_func\n\n# Brain should be defined by default\nbrain=Brain()\n\nconveyor_motor = Motor(\"ConveyorMotor\", 3)\nintake_motor = Motor(\"IntakeMotor\", 4)\nbumper = Bumper(\"Bumper\", 5)\nai_vision = AiVision(\"aiVision\", 6)\ngps = GPS(\"GPS\", 7)\noptical = Optical(\"Optical\", 8)\ndistance = Distance(\"Distance\", 9)\ndrivetrain = Drivetrain(\"drivetrain\", 0)\n\n# 'Enum' class for AI Vision GameElements\nclass GameElements:\n    BLUE_BLOCK = 0\n    RED_BLOCK = 1\n\n# Color to String Helper\ndef convert_color_to_string(col):\n    if col == RED:\n        return \"red\"\n    if col == GREEN:\n        return \"green\"\n    if col == BLUE:\n        return \"blue\"\n    if col == WHITE:\n        return \"white\"\n    if col == YELLOW:\n        return \"yellow\"\n    if col == ORANGE:\n        return \"orange\"\n    if col == PURPLE:\n        return \"purple\"\n    if col == CYAN:\n        return \"cyan\"\n    if col == RED_VIOLET:\n        return \"red_violet\"\n    if col == VIOLET:\n        return \"violet\"\n    if col == BLUE_VIOLET:\n        return \"blue_violet\"\n    if col == BLUE_GREEN:\n        return \"blue_green\"\n    if col == YELLOW_GREEN:\n        return \"yellow_green\"\n    if col == YELLOW_ORANGE:\n        return \"yellow_orange\"\n    if col == RED_ORANGE:\n        return \"red_orange\"\n    if col == BLACK:\n        return \"black\"\n    if col == TRANSPARENT:\n        return \"transparent\"\n    return \"\"\n\n#endregion VEXcode Generated Robot Configuration\n# ------------------------------------------\n# \n# \tProject:      VEXcode Project\n#\tAuthor:       VEX\n#\tCreated:\n#\tDescription:  VEXcode VR Python Project\n# \n# ------------------------------------------\n\nconveyor_percent = 100\n\nconveyor_motor.set_velocity(conveyor_percent, PERCENT)\nintake_motor.set_velocity(100, PERCENT)\ndrivetrain.set_turn_velocity(60, PERCENT)\ndrivetrain.set_drive_velocity(70, PERCENT)\n\none_block_turn = 1.2 * (100 - conveyor_percent)\n\nteam = 0\nlocked_timeout = 50\ngrab_timeout = 7\n\nlock_timer = 0\ngrab_timer = 0\n\ncan_lock = True\ncan_grab = True\ncan_drive = True\ni = 0 \nlocked_i = 0\ngrab_i = 0\ndisable_lock_i = 0\n\nlock_override = False\n\ndisable_lock_its = 10\n\nmonitor_variable(\"can_lock\", \"can_grab\", \"can_drive\", \"lock_timer\", \"grab_timer\", \"i\", \"locked_i\", \"grab_i\", \"lock_override\", \"disable_lock_i\")\n\ndef align_to_block(objs, block_index):\n    if len(objs) <= 0:\n        return\n    x = objs[block_index].centerX\n\n    # screen width is 320, half is 160\n    # relative to screen center, we want scr_x to be as close to 0 as possible\n    scr_x = x - 160\n\n    # if scr_x is negative, turn right, etc.\n    angle_to_turn = math.degrees(math.atan(scr_x/320))\n\n    # Assuming a function to set the robot's turn\n    direction = RIGHT if scr_x > 0 else LEFT\n\n    drivetrain.turn_for(direction, abs(angle_to_turn), DEGREES)\n\ndef grabbable_blocks(objs: list, grabbable_size: int) -> bool:\n    for obj in objs:\n        if obj.width >= grabbable_size and obj.height >= grabbable_size and obj.centerX > 160 - 35 and obj.centerX < 160 + 35 and obj.centerY > 140:\n            return True\n\n\n# Add project code in \"main\"\ndef main():\n    global can_lock, can_drive, can_grab, \\\n    lock_timer, grab_timer, \\\n    i, locked_i, grab_i, disable_lock_i, \\\n    disable_lock_timer, disable_lock_its, lock_override\n    drivetrain.turn_for(LEFT, 180, DEGREES)\n\n    while True:\n        #brain.screen.clear_screen()\n        objs = ai_vision.take_snapshot(AiVision.ALL_AIOBJS)\n        target_objs = [obj for obj in objs if obj.id == team]\n\n        locking = len(target_objs) > 0 and can_lock and not lock_override\n        grabbing = grabbable_blocks(target_objs, 30) and can_grab\n        \n\n        if locking:\n            if not grabbing:\n                grab_i = i\n            align_to_block(target_objs, 0)\n        else:\n            locked_i = i\n            grab_i = i\n            drivetrain.turn_for(RIGHT, 5, DEGREES)\n\n        if grabbing:\n            intake_motor.spin(FORWARD)\n            conveyor_motor.spin(FORWARD)\n            can_drive = False\n        elif grabbable_blocks(objs, 30):\n            intake_motor.spin(REVERSE)\n            conveyor_motor.spin(REVERSE)\n            can_drive = True\n        else:\n            intake_motor.stop()\n            conveyor_motor.stop()\n            can_drive = True\n\n        if can_drive:\n            drivetrain.drive(FORWARD)\n        else:\n            drivetrain.stop()\n\n        lock_timer = i - locked_i\n        grab_timer = i - grab_i\n\n        can_lock = lock_timer <= locked_timeout\n        can_grab = grab_timer <= grab_timeout\n\n        if not can_lock:\n            lock_override = True\n            disable_lock_i = i\n        if i - disable_lock_i > disable_lock_its:\n            lock_override = False\n\n        i += 1\n        \n\n            \n\n# dont delete\nvr_thread(main)\n","textLanguage":"python","robotConfig":[],"slot":0,"platform":"PG","sdkVersion":"20240802.15.00.00","appVersion":"4.62.0","minVersion":"4.60.0","fileFormat":"2.0.0","targetBrainGen":"First","v5SoundsEnabled":false,"aiVisionSettings":{"colors":[],"codes":[],"tags":true,"AIObjects":true,"AIObjectModel":[],"aiModelDropDownValue":null},"playground":"V5RC26","robotModel":"v5rc26","playgroundConfig":{"playground_id":"VRC_2025-2026","activity_id":"0","robot_starting_location":"C","robot_starting_orientation":0,"navigation_kit_data":{"settings":{"robot_position_offset_index":0,"hide_labels_in_playmode":false},"waypoints":[]}}}